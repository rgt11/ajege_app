{"ast":null,"code":"var _jsxFileName = \"D:\\\\mobilecross\\\\Ajege\\\\src\\\\pages\\\\Product.js\",\n    _s = $RefreshSig$();\n\nimport { IonBadge, IonButton, IonButtons, IonCard, IonCardContent, IonCardHeader, IonCardSubtitle, IonCol, IonContent, IonGrid, IonHeader, IonIcon, IonPage, IonRow, IonTitle, IonToolbar } from \"@ionic/react\";\nimport { arrowRedoOutline, cart, cartOutline, chevronBackOutline, heart, heartOutline } from \"ionicons/icons\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { useParams } from \"react-router\";\nimport ProductCard from \"../components/ProductCard\";\nimport { addToCart, CartStore } from \"../data/CartStore\";\nimport { addToFavourites, FavouritesStore } from \"../data/FavouritesStore\";\nimport { ProductStore } from \"../data/ProductStore\";\nimport styles from \"./Product.module.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Product = () => {\n  _s();\n\n  const params = useParams();\n  const cartRef = useRef();\n  const products = ProductStore.useState(s => s.products);\n  const favourites = FavouritesStore.useState(s => s.product_ids);\n  const [isFavourite, setIsFavourite] = useState(false);\n  const shopCart = CartStore.useState(s => s.product_ids);\n  const [product, setProduct] = useState({});\n  const [category, setCategory] = useState({});\n  useEffect(() => {\n    const categorySlug = params.slug;\n    const productID = params.id;\n    const tempCategory = products.filter(p => p.slug === categorySlug)[0];\n    const tempProduct = tempCategory.products.filter(p => parseInt(p.id) === parseInt(productID))[0];\n    const tempIsFavourite = favourites.find(f => f === `${categorySlug}/${productID}`);\n    setIsFavourite(tempIsFavourite);\n    setCategory(tempCategory);\n    setProduct(tempProduct);\n  }, [params.slug, params.id]);\n  useEffect(() => {\n    const tempIsFavourite = favourites.find(f => f === `${category.slug}/${product.id}`);\n    setIsFavourite(tempIsFavourite ? true : false);\n  }, [favourites, product]);\n\n  const addProductToFavourites = (e, categorySlug, productID) => {\n    e.preventDefault();\n    addToFavourites(categorySlug, productID);\n    document.getElementById(`placeholder_favourite_product_${categorySlug}_${productID}`).style.display = \"\";\n    document.getElementById(`placeholder_favourite_product_${categorySlug}_${productID}`).classList.add(\"animate__fadeOutTopRight\");\n  };\n\n  const addProductToCart = (e, categorySlug, productID) => {\n    e.preventDefault();\n    document.getElementById(`placeholder_cart_${categorySlug}_${productID}`).style.display = \"\";\n    document.getElementById(`placeholder_cart_${categorySlug}_${productID}`).classList.add(\"animate__fadeOutUp\");\n    setTimeout(() => {\n      cartRef.current.classList.add(\"animate__tada\");\n      addToCart(categorySlug, productID);\n      setTimeout(() => {\n        cartRef.current.classList.remove(\"animate__tada\");\n      }, 500);\n    }, 500);\n  };\n\n  return /*#__PURE__*/_jsxDEV(IonPage, {\n    id: \"category-page\",\n    className: styles.categoryPage,\n    children: [/*#__PURE__*/_jsxDEV(IonHeader, {\n      children: /*#__PURE__*/_jsxDEV(IonToolbar, {\n        children: [/*#__PURE__*/_jsxDEV(IonButtons, {\n          slot: \"start\",\n          children: /*#__PURE__*/_jsxDEV(IonButton, {\n            color: \"dark\",\n            text: category.name,\n            routerLink: `/category/${category.slug}`,\n            routerDirection: \"back\",\n            children: [/*#__PURE__*/_jsxDEV(IonIcon, {\n              color: \"dark\",\n              icon: chevronBackOutline\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 29\n            }, this), \"\\xA0\", category.name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(IonTitle, {\n          children: \"View Product\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(IonButtons, {\n          slot: \"end\",\n          children: [/*#__PURE__*/_jsxDEV(IonBadge, {\n            color: \"dark\",\n            children: shopCart.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(IonButton, {\n            color: \"dark\",\n            routerLink: \"/cart\",\n            children: /*#__PURE__*/_jsxDEV(IonIcon, {\n              ref: cartRef,\n              className: \"animate__animated\",\n              icon: cart\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(IonContent, {\n      fullscreen: true,\n      children: /*#__PURE__*/_jsxDEV(IonGrid, {\n        children: [/*#__PURE__*/_jsxDEV(IonRow, {\n          children: /*#__PURE__*/_jsxDEV(IonCol, {\n            size: \"12\",\n            children: /*#__PURE__*/_jsxDEV(IonCard, {\n              className: styles.categoryCard,\n              children: [/*#__PURE__*/_jsxDEV(IonCardHeader, {\n                className: styles.productCardHeader,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: styles.productCardActions,\n                  children: [/*#__PURE__*/_jsxDEV(IonIcon, {\n                    className: styles.productCardAction,\n                    color: isFavourite ? \"danger\" : \"medium\",\n                    icon: isFavourite ? heart : heartOutline,\n                    onClick: e => addProductToFavourites(e, category.slug, product.id)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 103,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(IonIcon, {\n                    style: {\n                      position: \"absolute\",\n                      display: \"none\"\n                    },\n                    id: `placeholder_favourite_product_${category.slug}_${product.id}`,\n                    className: `${styles.productCardAction} animate__animated`,\n                    color: \"danger\",\n                    icon: heart\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 104,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 102,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: product.image,\n                  alt: \"product pic\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 107,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"ion-text-wrap\",\n                  children: product.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 108,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(IonCardContent, {\n                className: styles.categoryCardContent,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: styles.productPrice,\n                  children: [/*#__PURE__*/_jsxDEV(IonButton, {\n                    color: \"light\",\n                    size: \"large\",\n                    children: product.price\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 114,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(IonButton, {\n                    size: \"large\",\n                    color: \"success\",\n                    onClick: e => addProductToCart(e, category.slug, product.id),\n                    children: [/*#__PURE__*/_jsxDEV(IonIcon, {\n                      icon: cartOutline\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 118,\n                      columnNumber: 45\n                    }, this), \"\\xA0\\xA0Add to Cart\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 117,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(IonIcon, {\n                    icon: cart,\n                    color: \"dark\",\n                    style: {\n                      position: \"absolute\",\n                      display: \"none\",\n                      fontSize: \"3rem\"\n                    },\n                    id: `placeholder_cart_${category.slug}_${product.id}`,\n                    className: \"animate__animated\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 121,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 113,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(IonRow, {\n          className: \"ion-text-center\",\n          children: /*#__PURE__*/_jsxDEV(IonCol, {\n            size: \"12\",\n            children: /*#__PURE__*/_jsxDEV(IonCardSubtitle, {\n              children: \"Similar products...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(IonRow, {\n          children: category && category.products && category.products.map((similar, index) => {\n            if (similar.id !== product.id && product.image && index < 4) {\n              return /*#__PURE__*/_jsxDEV(ProductCard, {\n                product: similar,\n                index: index,\n                isFavourite: false,\n                cartRef: cartRef,\n                category: category\n              }, `similar_product_${index}`, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 41\n              }, this);\n            }\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Product, \"OqckoW5X2SqamRIaLPwceIdkIGI=\", false, function () {\n  return [useParams];\n});\n\n_c = Product;\nexport default Product;\n\nvar _c;\n\n$RefreshReg$(_c, \"Product\");","map":{"version":3,"sources":["D:/mobilecross/Ajege/src/pages/Product.js"],"names":["IonBadge","IonButton","IonButtons","IonCard","IonCardContent","IonCardHeader","IonCardSubtitle","IonCol","IonContent","IonGrid","IonHeader","IonIcon","IonPage","IonRow","IonTitle","IonToolbar","arrowRedoOutline","cart","cartOutline","chevronBackOutline","heart","heartOutline","useEffect","useRef","useState","useParams","ProductCard","addToCart","CartStore","addToFavourites","FavouritesStore","ProductStore","styles","Product","params","cartRef","products","s","favourites","product_ids","isFavourite","setIsFavourite","shopCart","product","setProduct","category","setCategory","categorySlug","slug","productID","id","tempCategory","filter","p","tempProduct","parseInt","tempIsFavourite","find","f","addProductToFavourites","e","preventDefault","document","getElementById","style","display","classList","add","addProductToCart","setTimeout","current","remove","categoryPage","name","length","categoryCard","productCardHeader","productCardActions","productCardAction","position","image","categoryCardContent","productPrice","price","fontSize","map","similar","index"],"mappings":"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","sourcesContent":["import { IonBadge, IonButton, IonButtons, IonCard, IonCardContent, IonCardHeader, IonCardSubtitle, IonCol, IonContent, IonGrid, IonHeader, IonIcon, IonPage, IonRow, IonTitle, IonToolbar } from \"@ionic/react\";\r\nimport { arrowRedoOutline, cart, cartOutline, chevronBackOutline, heart, heartOutline } from \"ionicons/icons\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { useParams } from \"react-router\"\r\nimport ProductCard from \"../components/ProductCard\";\r\nimport { addToCart, CartStore } from \"../data/CartStore\";\r\nimport { addToFavourites, FavouritesStore } from \"../data/FavouritesStore\";\r\nimport { ProductStore } from \"../data/ProductStore\";\r\n\r\nimport styles from \"./Product.module.css\";\r\n\r\nconst Product = () => {\r\n\r\n    const params = useParams();\r\n    const cartRef = useRef();\r\n    const products = ProductStore.useState(s => s.products);\r\n    const favourites = FavouritesStore.useState(s => s.product_ids);\r\n    const [ isFavourite, setIsFavourite ] = useState(false);\r\n    const shopCart = CartStore.useState(s => s.product_ids);\r\n    const [ product, setProduct ] = useState({});\r\n    const [ category, setCategory ] = useState({});\r\n\r\n    useEffect(() => {\r\n\r\n        const categorySlug = params.slug;\r\n        const productID = params.id;\r\n        const tempCategory = products.filter(p => p.slug === categorySlug)[0];\r\n        const tempProduct = tempCategory.products.filter(p => parseInt(p.id) === parseInt(productID))[0];\r\n\r\n        const tempIsFavourite = favourites.find(f => f === `${ categorySlug }/${ productID }`);\r\n\r\n        setIsFavourite(tempIsFavourite);\r\n        setCategory(tempCategory);\r\n        setProduct(tempProduct);\r\n    }, [ params.slug, params.id ]);\r\n\r\n    useEffect(() => {\r\n\r\n        const tempIsFavourite = favourites.find(f => f === `${ category.slug }/${ product.id }`);\r\n        setIsFavourite(tempIsFavourite ? true : false);\r\n    }, [favourites, product]);\r\n\r\n    const addProductToFavourites = (e, categorySlug, productID) => {\r\n\r\n        e.preventDefault();\r\n        addToFavourites(categorySlug, productID);\r\n\r\n\r\n        document.getElementById(`placeholder_favourite_product_${ categorySlug }_${ productID }`).style.display = \"\";\r\n        document.getElementById(`placeholder_favourite_product_${ categorySlug }_${ productID }`).classList.add(\"animate__fadeOutTopRight\");\r\n    }\r\n\r\n    const addProductToCart = (e, categorySlug, productID) => {\r\n\r\n        e.preventDefault();\r\n\r\n        document.getElementById(`placeholder_cart_${ categorySlug }_${ productID }`).style.display = \"\";\r\n        document.getElementById(`placeholder_cart_${ categorySlug }_${ productID }`).classList.add(\"animate__fadeOutUp\");\r\n\r\n        setTimeout(() => {\r\n\r\n            cartRef.current.classList.add(\"animate__tada\");\r\n            addToCart(categorySlug, productID);\r\n\r\n            setTimeout(() => {\r\n                cartRef.current.classList.remove(\"animate__tada\");\r\n            }, 500);\r\n        }, 500);\r\n    }\r\n\r\n    return (\r\n\r\n        <IonPage id=\"category-page\" className={ styles.categoryPage }>\r\n            <IonHeader>\r\n\t\t\t\t<IonToolbar>\r\n                    <IonButtons slot=\"start\">\r\n                        <IonButton color=\"dark\" text={ category.name } routerLink={ `/category/${ category.slug }` } routerDirection=\"back\">\r\n                            <IonIcon color=\"dark\" icon={ chevronBackOutline } />&nbsp;{ category.name }\r\n                        </IonButton>\r\n                    </IonButtons>\r\n\r\n                    <IonTitle>View Product</IonTitle>\r\n\r\n                    <IonButtons slot=\"end\">\r\n                        <IonBadge color=\"dark\">\r\n                            { shopCart.length }\r\n                        </IonBadge>\r\n\t\t\t\t\t\t<IonButton color=\"dark\" routerLink=\"/cart\">\r\n\t\t\t\t\t\t\t<IonIcon ref={ cartRef } className=\"animate__animated\" icon={ cart } />\r\n\t\t\t\t\t\t</IonButton>\r\n\t\t\t\t\t</IonButtons>\r\n\t\t\t\t</IonToolbar>\r\n\t\t\t</IonHeader>\r\n\t\t\t\r\n\t\t\t<IonContent fullscreen>\r\n\r\n                <IonGrid>\r\n                    <IonRow>\r\n                        <IonCol size=\"12\">\r\n                            <IonCard className={ styles.categoryCard }>\r\n                                <IonCardHeader className={ styles.productCardHeader }>\r\n                                    <div className={ styles.productCardActions }>\r\n                                        <IonIcon className={ styles.productCardAction }  color={ isFavourite ? \"danger\" : \"medium\" } icon={ isFavourite ? heart : heartOutline } onClick={ e => addProductToFavourites(e, category.slug, product.id) } />\r\n                                        <IonIcon style={{ position: \"absolute\", display: \"none\" }} id={ `placeholder_favourite_product_${ category.slug }_${ product.id }` } className={ `${ styles.productCardAction } animate__animated` } color=\"danger\" icon={ heart } />\r\n                                        \r\n                                    </div>\r\n                                    <img src={ product.image } alt=\"product pic\" />\r\n                                    <p className=\"ion-text-wrap\">{ product.name }</p>\r\n                                </IonCardHeader>\r\n\r\n                                <IonCardContent className={ styles.categoryCardContent }>\r\n                                    \r\n                                    <div className={ styles.productPrice }>\r\n                                        <IonButton color=\"light\" size=\"large\">\r\n                                            { product.price }\r\n                                        </IonButton>\r\n                                        <IonButton size=\"large\" color=\"success\" onClick={ e => addProductToCart(e, category.slug, product.id) }>\r\n                                            <IonIcon icon={ cartOutline } />&nbsp;&nbsp;Add to Cart\r\n                                        </IonButton>\r\n\r\n                                        <IonIcon icon={ cart } color=\"dark\" style={{ position: \"absolute\", display: \"none\", fontSize: \"3rem\" }} id={ `placeholder_cart_${ category.slug }_${ product.id }` } className=\"animate__animated\" />\r\n                                    </div>\r\n                                </IonCardContent>\r\n                            </IonCard>\r\n                        </IonCol>\r\n                        </IonRow>\r\n\r\n                        <IonRow className=\"ion-text-center\">\r\n                            <IonCol size=\"12\">\r\n                                <IonCardSubtitle>Similar products...</IonCardSubtitle>\r\n                            </IonCol>\r\n                        </IonRow>\r\n\r\n                        <IonRow>\r\n                            { (category && category.products) && category.products.map((similar, index) => {\r\n\r\n                                if ((similar.id !== product.id) && product.image && index < 4) {\r\n\r\n                                    return (\r\n\r\n                                        <ProductCard key={ `similar_product_${ index }`} product={ similar } index={ index } isFavourite={ false } cartRef={ cartRef } category={ category } />\r\n                                    );\r\n                                }\r\n                            })}\r\n                        </IonRow>\r\n                </IonGrid>\r\n            </IonContent>\r\n        </IonPage>\r\n    );\r\n}\r\n\r\nexport default Product;"]},"metadata":{},"sourceType":"module"}