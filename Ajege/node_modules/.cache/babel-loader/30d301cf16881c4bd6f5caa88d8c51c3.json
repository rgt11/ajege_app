{"ast":null,"code":"var _jsxFileName = \"D:\\\\mobilecross\\\\Ajege\\\\src\\\\pages\\\\CategoryProducts.js\",\n    _s = $RefreshSig$();\n\nimport { IonBadge, IonButton, IonButtons, IonCol, IonContent, IonGrid, IonHeader, IonIcon, IonInfiniteScroll, IonInfiniteScrollContent, IonNote, IonPage, IonRow, IonSearchbar, IonTitle, IonToolbar } from \"@ionic/react\";\nimport { cart, chevronBackOutline, searchOutline } from \"ionicons/icons\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { useParams } from \"react-router\";\nimport ProductCard from \"../components/ProductCard\";\nimport { CartStore } from \"../data/CartStore\";\nimport { ProductStore } from \"../data/ProductStore\";\nimport styles from \"./CategoryProducts.module.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst CategoryProducts = () => {\n  _s();\n\n  const params = useParams();\n  const cartRef = useRef();\n  const products = ProductStore.useState(s => s.products);\n  const shopCart = CartStore.useState(s => s.product_ids);\n  const [category, setCategory] = useState({});\n  const [searchResults, setsearchResults] = useState([]);\n  const [amountLoaded, setAmountLoaded] = useState(6);\n  useEffect(() => {\n    const categorySlug = params.slug;\n    const tempCategory = products.filter(p => p.slug === categorySlug)[0];\n    setCategory(tempCategory);\n    setsearchResults(tempCategory.products);\n  }, [params.slug]);\n\n  const fetchMore = async e => {\n    //\tIncrement the amount loaded by 6 for the next iteration\n    setAmountLoaded(prevAmount => prevAmount + 6);\n    e.target.complete();\n  };\n\n  const search = async e => {\n    const searchVal = e.target.value;\n\n    if (searchVal !== \"\") {\n      const tempResults = category.products.filter(p => p.name.toLowerCase().includes(searchVal.toLowerCase()));\n      setsearchResults(tempResults);\n    } else {\n      setsearchResults(category.products);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(IonPage, {\n    id: \"category-page\",\n    className: styles.categoryPage,\n    children: [/*#__PURE__*/_jsxDEV(IonHeader, {\n      children: /*#__PURE__*/_jsxDEV(IonToolbar, {\n        children: [/*#__PURE__*/_jsxDEV(IonButtons, {\n          slot: \"start\",\n          children: /*#__PURE__*/_jsxDEV(IonButton, {\n            color: \"dark\",\n            text: category.name,\n            routerLink: \"/\",\n            routerDirection: \"back\",\n            children: [/*#__PURE__*/_jsxDEV(IonIcon, {\n              color: \"dark\",\n              icon: chevronBackOutline\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 29\n            }, this), \"\\xA0Categories\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(IonTitle, {\n          children: category && category.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(IonContent, {\n      fullscreen: true,\n      children: [/*#__PURE__*/_jsxDEV(IonSearchbar, {\n        className: styles.search,\n        onKeyUp: search,\n        placeholder: \"Search Here\",\n        searchIcon: searchOutline,\n        animated: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(IonGrid, {\n        children: [/*#__PURE__*/_jsxDEV(IonRow, {\n          className: \"ion-text-center\",\n          children: /*#__PURE__*/_jsxDEV(IonCol, {\n            size: \"12\",\n            children: /*#__PURE__*/_jsxDEV(IonNote, {\n              children: [searchResults && searchResults.length, \" \", searchResults.length > 1 || searchResults.length === 0 ? \" products\" : \" product\", \" found\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(IonRow, {\n          children: searchResults && searchResults.map((product, index) => {\n            if (index <= amountLoaded && product.image) {\n              return /*#__PURE__*/_jsxDEV(ProductCard, {\n                product: product,\n                index: index,\n                cartRef: cartRef,\n                category: category\n              }, `category_product_${index}`, false, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 37\n              }, this);\n            }\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(IonInfiniteScroll, {\n        threshold: \"100px\",\n        onIonInfinite: fetchMore,\n        children: /*#__PURE__*/_jsxDEV(IonInfiniteScrollContent, {\n          loadingSpinner: \"bubbles\",\n          loadingText: \"Fetching more...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 9\n  }, this);\n};\n\n_s(CategoryProducts, \"coFsweI47l4RotrDiyZ09A57Raw=\", false, function () {\n  return [useParams];\n});\n\n_c = CategoryProducts;\nexport default CategoryProducts;\n\nvar _c;\n\n$RefreshReg$(_c, \"CategoryProducts\");","map":{"version":3,"sources":["D:/mobilecross/Ajege/src/pages/CategoryProducts.js"],"names":["IonBadge","IonButton","IonButtons","IonCol","IonContent","IonGrid","IonHeader","IonIcon","IonInfiniteScroll","IonInfiniteScrollContent","IonNote","IonPage","IonRow","IonSearchbar","IonTitle","IonToolbar","cart","chevronBackOutline","searchOutline","useEffect","useRef","useState","useParams","ProductCard","CartStore","ProductStore","styles","CategoryProducts","params","cartRef","products","s","shopCart","product_ids","category","setCategory","searchResults","setsearchResults","amountLoaded","setAmountLoaded","categorySlug","slug","tempCategory","filter","p","fetchMore","e","prevAmount","target","complete","search","searchVal","value","tempResults","name","toLowerCase","includes","categoryPage","length","map","product","index","image"],"mappings":";;;AAAA,SAASA,QAAT,EAAmBC,SAAnB,EAA8BC,UAA9B,EAA0CC,MAA1C,EAAkDC,UAAlD,EAA8DC,OAA9D,EAAuEC,SAAvE,EAAkFC,OAAlF,EAA2FC,iBAA3F,EAA8GC,wBAA9G,EAAwIC,OAAxI,EAAiJC,OAAjJ,EAA0JC,MAA1J,EAAkKC,YAAlK,EAAgLC,QAAhL,EAA0LC,UAA1L,QAA4M,cAA5M;AACA,SAASC,IAAT,EAAeC,kBAAf,EAAmCC,aAAnC,QAAwD,gBAAxD;AACA,SAASC,SAAT,EAAoBC,MAApB,EAA4BC,QAA5B,QAA4C,OAA5C;AACA,SAASC,SAAT,QAA0B,cAA1B;AACA,OAAOC,WAAP,MAAwB,2BAAxB;AAEA,SAASC,SAAT,QAA0B,mBAA1B;AACA,SAASC,YAAT,QAA6B,sBAA7B;AAEA,OAAOC,MAAP,MAAmB,+BAAnB;;;AAEA,MAAMC,gBAAgB,GAAG,MAAM;AAAA;;AAE3B,QAAMC,MAAM,GAAGN,SAAS,EAAxB;AACA,QAAMO,OAAO,GAAGT,MAAM,EAAtB;AACA,QAAMU,QAAQ,GAAGL,YAAY,CAACJ,QAAb,CAAsBU,CAAC,IAAIA,CAAC,CAACD,QAA7B,CAAjB;AACA,QAAME,QAAQ,GAAGR,SAAS,CAACH,QAAV,CAAmBU,CAAC,IAAIA,CAAC,CAACE,WAA1B,CAAjB;AACA,QAAM,CAAEC,QAAF,EAAYC,WAAZ,IAA4Bd,QAAQ,CAAC,EAAD,CAA1C;AACA,QAAM,CAAEe,aAAF,EAAiBC,gBAAjB,IAAsChB,QAAQ,CAAC,EAAD,CAApD;AACA,QAAM,CAAEiB,YAAF,EAAgBC,eAAhB,IAAoClB,QAAQ,CAAC,CAAD,CAAlD;AAEAF,EAAAA,SAAS,CAAC,MAAM;AAEZ,UAAMqB,YAAY,GAAGZ,MAAM,CAACa,IAA5B;AACA,UAAMC,YAAY,GAAGZ,QAAQ,CAACa,MAAT,CAAgBC,CAAC,IAAIA,CAAC,CAACH,IAAF,KAAWD,YAAhC,EAA8C,CAA9C,CAArB;AACAL,IAAAA,WAAW,CAACO,YAAD,CAAX;AACAL,IAAAA,gBAAgB,CAACK,YAAY,CAACZ,QAAd,CAAhB;AACH,GANQ,EAMN,CAAEF,MAAM,CAACa,IAAT,CANM,CAAT;;AAQA,QAAMI,SAAS,GAAG,MAAOC,CAAP,IAAa;AAEjC;AACAP,IAAAA,eAAe,CAACQ,UAAU,IAAKA,UAAU,GAAG,CAA7B,CAAf;AACAD,IAAAA,CAAC,CAACE,MAAF,CAASC,QAAT;AACA,GALE;;AAOA,QAAMC,MAAM,GAAG,MAAMJ,CAAN,IAAW;AAEtB,UAAMK,SAAS,GAAGL,CAAC,CAACE,MAAF,CAASI,KAA3B;;AAEA,QAAID,SAAS,KAAK,EAAlB,EAAsB;AAElB,YAAME,WAAW,GAAGnB,QAAQ,CAACJ,QAAT,CAAkBa,MAAlB,CAAyBC,CAAC,IAAIA,CAAC,CAACU,IAAF,CAAOC,WAAP,GAAqBC,QAArB,CAA8BL,SAAS,CAACI,WAAV,EAA9B,CAA9B,CAApB;AACAlB,MAAAA,gBAAgB,CAACgB,WAAD,CAAhB;AACH,KAJD,MAIO;AAEHhB,MAAAA,gBAAgB,CAACH,QAAQ,CAACJ,QAAV,CAAhB;AACH;AACJ,GAZD;;AAcA,sBAEI,QAAC,OAAD;AAAS,IAAA,EAAE,EAAC,eAAZ;AAA4B,IAAA,SAAS,EAAGJ,MAAM,CAAC+B,YAA/C;AAAA,4BACI,QAAC,SAAD;AAAA,6BACR,QAAC,UAAD;AAAA,gCACgB,QAAC,UAAD;AAAY,UAAA,IAAI,EAAC,OAAjB;AAAA,iCACI,QAAC,SAAD;AAAW,YAAA,KAAK,EAAC,MAAjB;AAAwB,YAAA,IAAI,EAAGvB,QAAQ,CAACoB,IAAxC;AAA+C,YAAA,UAAU,EAAC,GAA1D;AAA8D,YAAA,eAAe,EAAC,MAA9E;AAAA,oCACI,QAAC,OAAD;AAAS,cAAA,KAAK,EAAC,MAAf;AAAsB,cAAA,IAAI,EAAGrC;AAA7B;AAAA;AAAA;AAAA;AAAA,oBADJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBADhB,eAMC,QAAC,QAAD;AAAA,oBAAYiB,QAAQ,IAAIA,QAAQ,CAACoB;AAAjC;AAAA;AAAA;AAAA;AAAA,gBAND;AAAA;AAAA;AAAA;AAAA;AAAA;AADQ;AAAA;AAAA;AAAA;AAAA,YADJ,eAYL,QAAC,UAAD;AAAY,MAAA,UAAU,MAAtB;AAAA,8BAEa,QAAC,YAAD;AAAc,QAAA,SAAS,EAAG5B,MAAM,CAACwB,MAAjC;AAA0C,QAAA,OAAO,EAAGA,MAApD;AAA6D,QAAA,WAAW,EAAC,aAAzE;AAAuF,QAAA,UAAU,EAAGhC,aAApG;AAAoH,QAAA,QAAQ,EAAG;AAA/H;AAAA;AAAA;AAAA;AAAA,cAFb,eAIa,QAAC,OAAD;AAAA,gCAEI,QAAC,MAAD;AAAQ,UAAA,SAAS,EAAC,iBAAlB;AAAA,iCACI,QAAC,MAAD;AAAQ,YAAA,IAAI,EAAC,IAAb;AAAA,mCACI,QAAC,OAAD;AAAA,yBAAWkB,aAAa,IAAIA,aAAa,CAACsB,MAA1C,OAAsDtB,aAAa,CAACsB,MAAd,GAAuB,CAAvB,IAA4BtB,aAAa,CAACsB,MAAd,KAAyB,CAAtD,GAA2D,WAA3D,GAAyE,UAA9H;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBAFJ,eAQI,QAAC,MAAD;AAAA,oBACMtB,aAAa,IAAIA,aAAa,CAACuB,GAAd,CAAkB,CAACC,OAAD,EAAUC,KAAV,KAAoB;AAErD,gBAAKA,KAAK,IAAIvB,YAAV,IAA2BsB,OAAO,CAACE,KAAvC,EAA8C;AAC1C,kCACI,QAAC,WAAD;AAAkD,gBAAA,OAAO,EAAGF,OAA5D;AAAsE,gBAAA,KAAK,EAAGC,KAA9E;AAAsF,gBAAA,OAAO,EAAGhC,OAAhG;AAA0G,gBAAA,QAAQ,EAAGK;AAArH,iBAAoB,oBAAoB2B,KAAO,EAA/C;AAAA;AAAA;AAAA;AAAA,sBADJ;AAGH;AACJ,WAPkB;AADvB;AAAA;AAAA;AAAA;AAAA,gBARJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAJb,eAwBa,QAAC,iBAAD;AAAmB,QAAA,SAAS,EAAC,OAA7B;AAAqC,QAAA,aAAa,EAAGhB,SAArD;AAAA,+BACX,QAAC,wBAAD;AAA0B,UAAA,cAAc,EAAC,SAAzC;AAAmD,UAAA,WAAW,EAAC;AAA/D;AAAA;AAAA;AAAA;AAAA;AADW;AAAA;AAAA;AAAA;AAAA,cAxBb;AAAA;AAAA;AAAA;AAAA;AAAA,YAZK;AAAA;AAAA;AAAA;AAAA;AAAA,UAFJ;AA6CH,CApFD;;GAAMlB,gB;UAEaL,S;;;KAFbK,gB;AAsFN,eAAeA,gBAAf","sourcesContent":["import { IonBadge, IonButton, IonButtons, IonCol, IonContent, IonGrid, IonHeader, IonIcon, IonInfiniteScroll, IonInfiniteScrollContent, IonNote, IonPage, IonRow, IonSearchbar, IonTitle, IonToolbar } from \"@ionic/react\";\r\nimport { cart, chevronBackOutline, searchOutline } from \"ionicons/icons\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { useParams } from \"react-router\"\r\nimport ProductCard from \"../components/ProductCard\";\r\n\r\nimport { CartStore } from \"../data/CartStore\";\r\nimport { ProductStore } from \"../data/ProductStore\";\r\n\r\nimport styles from \"./CategoryProducts.module.css\";\r\n\r\nconst CategoryProducts = () => {\r\n\r\n    const params = useParams();\r\n    const cartRef = useRef();\r\n    const products = ProductStore.useState(s => s.products);\r\n    const shopCart = CartStore.useState(s => s.product_ids);\r\n    const [ category, setCategory ] = useState({});\r\n    const [ searchResults, setsearchResults ] = useState([]);\r\n    const [ amountLoaded, setAmountLoaded ] = useState(6);\r\n\r\n    useEffect(() => {\r\n\r\n        const categorySlug = params.slug;\r\n        const tempCategory = products.filter(p => p.slug === categorySlug)[0];\r\n        setCategory(tempCategory);\r\n        setsearchResults(tempCategory.products);\r\n    }, [ params.slug ]);\r\n\r\n    const fetchMore = async (e) => {\r\n\r\n\t\t//\tIncrement the amount loaded by 6 for the next iteration\r\n\t\tsetAmountLoaded(prevAmount => (prevAmount + 6));\r\n\t\te.target.complete();\r\n\t}\r\n\r\n    const search = async e => {\r\n\r\n        const searchVal = e.target.value;\r\n\r\n        if (searchVal !== \"\") {\r\n         \r\n            const tempResults = category.products.filter(p => p.name.toLowerCase().includes(searchVal.toLowerCase()));\r\n            setsearchResults(tempResults);\r\n        } else {\r\n\r\n            setsearchResults(category.products);\r\n        }\r\n    }\r\n\r\n    return (\r\n\r\n        <IonPage id=\"category-page\" className={ styles.categoryPage }>\r\n            <IonHeader>\r\n\t\t\t\t<IonToolbar>\r\n                    <IonButtons slot=\"start\">\r\n                        <IonButton color=\"dark\" text={ category.name } routerLink=\"/\" routerDirection=\"back\">\r\n                            <IonIcon color=\"dark\" icon={ chevronBackOutline } />&nbsp;Categories\r\n                        </IonButton>\r\n                    </IonButtons>\r\n\t\t\t\t\t<IonTitle>{ category && category.name }</IonTitle>\r\n\t\t\t\t</IonToolbar>\r\n\t\t\t</IonHeader>\r\n\t\t\t\r\n\t\t\t<IonContent fullscreen>\r\n\r\n                <IonSearchbar className={ styles.search } onKeyUp={ search } placeholder=\"Search Here\" searchIcon={ searchOutline } animated={ true } />\r\n\r\n                <IonGrid>\r\n\r\n                    <IonRow className=\"ion-text-center\">\r\n                        <IonCol size=\"12\">\r\n                            <IonNote>{ searchResults && searchResults.length } { (searchResults.length > 1 || searchResults.length === 0) ? \" products\" : \" product\" } found</IonNote>\r\n                        </IonCol>\r\n                    </IonRow>\r\n\r\n                    <IonRow>\r\n                        { searchResults && searchResults.map((product, index) => {\r\n\r\n                            if ((index <= amountLoaded) && product.image) {\r\n                                return (\r\n                                    <ProductCard key={ `category_product_${ index }`} product={ product } index={ index } cartRef={ cartRef } category={ category } />\r\n                                );\r\n                            }\r\n                        })}\r\n                    </IonRow>\r\n                </IonGrid>\r\n\r\n                <IonInfiniteScroll threshold=\"100px\" onIonInfinite={ fetchMore }>\r\n\t\t\t\t\t<IonInfiniteScrollContent loadingSpinner=\"bubbles\" loadingText=\"Fetching more...\">\r\n\t\t\t\t\t</IonInfiniteScrollContent>\r\n\t\t\t\t</IonInfiniteScroll>\r\n            </IonContent>\r\n        </IonPage>\r\n    );\r\n}\r\n\r\nexport default CategoryProducts;"]},"metadata":{},"sourceType":"module"}