{"ast":null,"code":"import _regeneratorRuntime from\"D:/mobilecross/Ajege/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"D:/mobilecross/Ajege/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"D:/mobilecross/Ajege/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{ProductStore}from\"./ProductStore\";export var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var json,products;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:json=[\"yamaha.json\"];products=[];json.forEach(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(category){var products,categoryName,productCategory;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetchProducts(category);case 2:products=_context.sent;categoryName=category.replace(\".json\",\"\");categoryName=categoryName.replace(\"_\",\" \");categoryName=uppercaseWords(categoryName);productCategory={name:categoryName,slug:category.replace(\".json\",\"\"),cover:products[6].image,products:products};ProductStore.update(function(s){s.products=[].concat(_toConsumableArray(s.products),[productCategory]);});case 8:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}());return _context2.abrupt(\"return\",products);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchData(){return _ref.apply(this,arguments);};}();var fetchProducts=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(category){var response,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(\"products/\".concat(category));case 2:response=_context3.sent;_context3.next=5;return response.json();case 5:data=_context3.sent;_context3.next=8;return data.forEach(function(d,i){d.id=i+1;});case 8:return _context3.abrupt(\"return\",data);case 9:case\"end\":return _context3.stop();}}},_callee3);}));return function fetchProducts(_x2){return _ref3.apply(this,arguments);};}();var uppercaseWords=function uppercaseWords(words){words=words.toLowerCase().split(' ').map(function(s){return s.charAt(0).toUpperCase()+s.substring(1);}).join(' ');return words;};","map":{"version":3,"sources":["D:/mobilecross/Ajege/src/data/fetcher.js"],"names":["ProductStore","fetchData","json","products","forEach","category","fetchProducts","categoryName","replace","uppercaseWords","productCategory","name","slug","cover","image","update","s","fetch","response","data","d","i","id","words","toLowerCase","split","map","charAt","toUpperCase","substring","join"],"mappings":"saAAA,OAASA,YAAT,KAA6B,gBAA7B,CAEA,MAAO,IAAMC,CAAAA,SAAS,0FAAG,0JAEfC,IAFe,CAER,CAAC,aAAD,CAFQ,CAIjBC,QAJiB,CAIN,EAJM,CAMrBD,IAAI,CAACE,OAAL,2FAAc,iBAAMC,QAAN,kLAEaC,CAAAA,aAAa,CAACD,QAAD,CAF1B,QAEJF,QAFI,eAINI,YAJM,CAISF,QAAQ,CAACG,OAAT,CAAiB,OAAjB,CAA0B,EAA1B,CAJT,CAKVD,YAAY,CAAGA,YAAY,CAACC,OAAb,CAAqB,GAArB,CAA0B,GAA1B,CAAf,CACAD,YAAY,CAAGE,cAAc,CAACF,YAAD,CAA7B,CAEMG,eARI,CAQc,CAEpBC,IAAI,CAAEJ,YAFc,CAGpBK,IAAI,CAAEP,QAAQ,CAACG,OAAT,CAAiB,OAAjB,CAA0B,EAA1B,CAHc,CAIpBK,KAAK,CAAEV,QAAQ,CAAC,CAAD,CAAR,CAAYW,KAJC,CAKpBX,QAAQ,CAARA,QALoB,CARd,CAgBVH,YAAY,CAACe,MAAb,CAAoB,SAAAC,CAAC,CAAI,CAAEA,CAAC,CAACb,QAAF,8BAAkBa,CAAC,CAACb,QAApB,GAA8BO,eAA9B,GAAkD,CAA7E,EAhBU,sDAAd,iEANqB,iCAyBdP,QAzBc,0DAAH,kBAATF,CAAAA,SAAS,0CAAf,CA4BP,GAAMK,CAAAA,aAAa,2FAAG,kBAAMD,QAAN,+JAEKY,CAAAA,KAAK,oBAAcZ,QAAd,EAFV,QAEZa,QAFY,uCAGCA,CAAAA,QAAQ,CAAChB,IAAT,EAHD,QAGZiB,IAHY,uCAMZA,CAAAA,IAAI,CAACf,OAAL,CAAa,SAACgB,CAAD,CAAIC,CAAJ,CAAU,CAEzBD,CAAC,CAACE,EAAF,CAAOD,CAAC,CAAG,CAAX,CACH,CAHK,CANY,yCAWXF,IAXW,0DAAH,kBAAbb,CAAAA,aAAa,8CAAnB,CAcA,GAAMG,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAAAc,KAAK,CAAI,CAE5BA,KAAK,CAAGA,KAAK,CAACC,WAAN,GACPC,KADO,CACD,GADC,EAEPC,GAFO,CAEH,SAACV,CAAD,QAAOA,CAAAA,CAAC,CAACW,MAAF,CAAS,CAAT,EAAYC,WAAZ,GAA4BZ,CAAC,CAACa,SAAF,CAAY,CAAZ,CAAnC,EAFG,EAGPC,IAHO,CAGF,GAHE,CAAR,CAKA,MAAOP,CAAAA,KAAP,CACH,CARD","sourcesContent":["import { ProductStore } from \"./ProductStore\";\r\n\r\nexport const fetchData = async () => {\r\n\r\n    const json = [\"yamaha.json\"];\r\n\r\n    var products = [];\r\n\r\n    json.forEach( async category => {\r\n\r\n        const products = await fetchProducts(category);\r\n\r\n        let categoryName = category.replace(\".json\", \"\");\r\n        categoryName = categoryName.replace(\"_\", \" \");\r\n        categoryName = uppercaseWords(categoryName);\r\n\r\n        const productCategory = {\r\n\r\n            name: categoryName,\r\n            slug: category.replace(\".json\", \"\"),\r\n            cover: products[6].image,\r\n            products\r\n        };\r\n\r\n        ProductStore.update(s => { s.products = [ ...s.products, productCategory ]; });\r\n    });\r\n\r\n    return products;\r\n}\r\n\r\nconst fetchProducts = async category => {\r\n\r\n    const response = await fetch(`products/${ category }`);\r\n    const data = await response.json();\r\n\r\n    //  Set a product id\r\n    await data.forEach((d, i) => {\r\n\r\n        d.id = i + 1;\r\n    });\r\n\r\n    return data;\r\n}\r\n\r\nconst uppercaseWords = words => {\r\n\r\n    words = words.toLowerCase()\r\n    .split(' ')\r\n    .map((s) => s.charAt(0).toUpperCase() + s.substring(1))\r\n    .join(' ');\r\n\r\n    return words;\r\n}"]},"metadata":{},"sourceType":"module"}