{"ast":null,"code":"import _regeneratorRuntime from\"D:/mobilecross/Ajege/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/mobilecross/Ajege/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/mobilecross/Ajege/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{IonBadge,IonButton,IonButtons,IonCol,IonContent,IonGrid,IonHeader,IonIcon,IonInfiniteScroll,IonInfiniteScrollContent,IonNote,IonPage,IonRow,IonSearchbar,IonTitle,IonToolbar}from\"@ionic/react\";import{cart,chevronBackOutline,searchOutline}from\"ionicons/icons\";import{useEffect,useRef,useState}from\"react\";import{useParams}from\"react-router\";import ProductCard from\"../components/ProductCard\";import{CartStore}from\"../data/CartStore\";import{ProductStore}from\"../data/ProductStore\";import styles from\"./CategoryProducts.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CategoryProducts=function CategoryProducts(){var params=useParams();var cartRef=useRef();var products=ProductStore.useState(function(s){return s.products;});var shopCart=CartStore.useState(function(s){return s.product_ids;});var _useState=useState({}),_useState2=_slicedToArray(_useState,2),category=_useState2[0],setCategory=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),searchResults=_useState4[0],setsearchResults=_useState4[1];var _useState5=useState(6),_useState6=_slicedToArray(_useState5,2),amountLoaded=_useState6[0],setAmountLoaded=_useState6[1];useEffect(function(){var categorySlug=params.slug;var tempCategory=products.filter(function(p){return p.slug===categorySlug;})[0];setCategory(tempCategory);setsearchResults(tempCategory.products);},[params.slug]);var fetchMore=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0://\tIncrement the amount loaded by 6 for the next iteration\nsetAmountLoaded(function(prevAmount){return prevAmount+6;});e.target.complete();case 2:case\"end\":return _context.stop();}}},_callee);}));return function fetchMore(_x){return _ref.apply(this,arguments);};}();var search=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var searchVal,tempResults;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:searchVal=e.target.value;if(searchVal!==\"\"){tempResults=category.products.filter(function(p){return p.name.toLowerCase().includes(searchVal.toLowerCase());});setsearchResults(tempResults);}else{setsearchResults(category.products);}case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function search(_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(IonPage,{id:\"category-page\",className:styles.categoryPage,children:[/*#__PURE__*/_jsx(IonHeader,{children:/*#__PURE__*/_jsxs(IonToolbar,{children:[/*#__PURE__*/_jsx(IonButtons,{slot:\"start\",children:/*#__PURE__*/_jsxs(IonButton,{color:\"dark\",text:category.name,routerLink:\"/\",routerDirection:\"back\",children:[/*#__PURE__*/_jsx(IonIcon,{color:\"dark\",icon:chevronBackOutline}),\"\\xA0Categories\"]})}),/*#__PURE__*/_jsx(IonTitle,{children:category&&category.name})]})}),/*#__PURE__*/_jsxs(IonContent,{fullscreen:true,children:[/*#__PURE__*/_jsx(IonSearchbar,{className:styles.search,onKeyUp:search,placeholder:\"Search Here\",searchIcon:searchOutline,animated:true}),/*#__PURE__*/_jsxs(IonGrid,{children:[/*#__PURE__*/_jsx(IonRow,{className:\"ion-text-center\",children:/*#__PURE__*/_jsx(IonCol,{size:\"12\",children:/*#__PURE__*/_jsxs(IonNote,{children:[searchResults&&searchResults.length,\" \",searchResults.length>1||searchResults.length===0?\" products\":\" product\",\" found\"]})})}),/*#__PURE__*/_jsx(IonRow,{children:searchResults&&searchResults.map(function(product,index){if(index<=amountLoaded&&product.image){return/*#__PURE__*/_jsx(ProductCard,{product:product,index:index,cartRef:cartRef,category:category},\"category_product_\".concat(index));}})})]}),/*#__PURE__*/_jsx(IonInfiniteScroll,{threshold:\"100px\",onIonInfinite:fetchMore,children:/*#__PURE__*/_jsx(IonInfiniteScrollContent,{loadingSpinner:\"bubbles\",loadingText:\"Fetching more...\"})})]})]});};export default CategoryProducts;","map":{"version":3,"sources":["D:/mobilecross/Ajege/src/pages/CategoryProducts.js"],"names":["IonBadge","IonButton","IonButtons","IonCol","IonContent","IonGrid","IonHeader","IonIcon","IonInfiniteScroll","IonInfiniteScrollContent","IonNote","IonPage","IonRow","IonSearchbar","IonTitle","IonToolbar","cart","chevronBackOutline","searchOutline","useEffect","useRef","useState","useParams","ProductCard","CartStore","ProductStore","styles","CategoryProducts","params","cartRef","products","s","shopCart","product_ids","category","setCategory","searchResults","setsearchResults","amountLoaded","setAmountLoaded","categorySlug","slug","tempCategory","filter","p","fetchMore","e","prevAmount","target","complete","search","searchVal","value","tempResults","name","toLowerCase","includes","categoryPage","length","map","product","index","image"],"mappings":"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","sourcesContent":["import { IonBadge, IonButton, IonButtons, IonCol, IonContent, IonGrid, IonHeader, IonIcon, IonInfiniteScroll, IonInfiniteScrollContent, IonNote, IonPage, IonRow, IonSearchbar, IonTitle, IonToolbar } from \"@ionic/react\";\r\nimport { cart, chevronBackOutline, searchOutline } from \"ionicons/icons\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { useParams } from \"react-router\"\r\nimport ProductCard from \"../components/ProductCard\";\r\n\r\nimport { CartStore } from \"../data/CartStore\";\r\nimport { ProductStore } from \"../data/ProductStore\";\r\n\r\nimport styles from \"./CategoryProducts.module.css\";\r\n\r\nconst CategoryProducts = () => {\r\n\r\n    const params = useParams();\r\n    const cartRef = useRef();\r\n    const products = ProductStore.useState(s => s.products);\r\n    const shopCart = CartStore.useState(s => s.product_ids);\r\n    const [ category, setCategory ] = useState({});\r\n    const [ searchResults, setsearchResults ] = useState([]);\r\n    const [ amountLoaded, setAmountLoaded ] = useState(6);\r\n\r\n    useEffect(() => {\r\n\r\n        const categorySlug = params.slug;\r\n        const tempCategory = products.filter(p => p.slug === categorySlug)[0];\r\n        setCategory(tempCategory);\r\n        setsearchResults(tempCategory.products);\r\n    }, [ params.slug ]);\r\n\r\n    const fetchMore = async (e) => {\r\n\r\n\t\t//\tIncrement the amount loaded by 6 for the next iteration\r\n\t\tsetAmountLoaded(prevAmount => (prevAmount + 6));\r\n\t\te.target.complete();\r\n\t}\r\n\r\n    const search = async e => {\r\n\r\n        const searchVal = e.target.value;\r\n\r\n        if (searchVal !== \"\") {\r\n         \r\n            const tempResults = category.products.filter(p => p.name.toLowerCase().includes(searchVal.toLowerCase()));\r\n            setsearchResults(tempResults);\r\n        } else {\r\n\r\n            setsearchResults(category.products);\r\n        }\r\n    }\r\n\r\n    return (\r\n\r\n        <IonPage id=\"category-page\" className={ styles.categoryPage }>\r\n            <IonHeader>\r\n\t\t\t\t<IonToolbar>\r\n                    <IonButtons slot=\"start\">\r\n                        <IonButton color=\"dark\" text={ category.name } routerLink=\"/\" routerDirection=\"back\">\r\n                            <IonIcon color=\"dark\" icon={ chevronBackOutline } />&nbsp;Categories\r\n                        </IonButton>\r\n                    </IonButtons>\r\n\t\t\t\t\t<IonTitle>{ category && category.name }</IonTitle>\r\n\t\t\t\t</IonToolbar>\r\n\t\t\t</IonHeader>\r\n\t\t\t\r\n\t\t\t<IonContent fullscreen>\r\n\r\n                <IonSearchbar className={ styles.search } onKeyUp={ search } placeholder=\"Search Here\" searchIcon={ searchOutline } animated={ true } />\r\n\r\n                <IonGrid>\r\n\r\n                    <IonRow className=\"ion-text-center\">\r\n                        <IonCol size=\"12\">\r\n                            <IonNote>{ searchResults && searchResults.length } { (searchResults.length > 1 || searchResults.length === 0) ? \" products\" : \" product\" } found</IonNote>\r\n                        </IonCol>\r\n                    </IonRow>\r\n\r\n                    <IonRow>\r\n                        { searchResults && searchResults.map((product, index) => {\r\n\r\n                            if ((index <= amountLoaded) && product.image) {\r\n                                return (\r\n                                    <ProductCard key={ `category_product_${ index }`} product={ product } index={ index } cartRef={ cartRef } category={ category } />\r\n                                );\r\n                            }\r\n                        })}\r\n                    </IonRow>\r\n                </IonGrid>\r\n\r\n                <IonInfiniteScroll threshold=\"100px\" onIonInfinite={ fetchMore }>\r\n\t\t\t\t\t<IonInfiniteScrollContent loadingSpinner=\"bubbles\" loadingText=\"Fetching more...\">\r\n\t\t\t\t\t</IonInfiniteScrollContent>\r\n\t\t\t\t</IonInfiniteScroll>\r\n            </IonContent>\r\n        </IonPage>\r\n    );\r\n}\r\n\r\nexport default CategoryProducts;"]},"metadata":{},"sourceType":"module"}