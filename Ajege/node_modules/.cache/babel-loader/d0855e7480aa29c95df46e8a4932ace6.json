{"ast":null,"code":"import _regeneratorRuntime from\"D:/mobilecross/Ajege/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/mobilecross/Ajege/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"D:/mobilecross/Ajege/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"D:/mobilecross/Ajege/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{IonBadge,IonButton,IonButtons,IonCol,IonContent,IonGrid,IonHeader,IonIcon,IonInfiniteScroll,IonInfiniteScrollContent,IonNote,IonPage,IonRow,IonTitle,IonToolbar}from\"@ionic/react\";import{cart,chevronBackOutline}from\"ionicons/icons\";import{useEffect,useRef,useState}from\"react\";import ProductCard from\"../components/ProductCard\";import{CartStore}from\"../data/CartStore\";import{FavouritesStore}from\"../data/FavouritesStore\";import{ProductStore}from\"../data/ProductStore\";import styles from\"./CategoryProducts.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FavouriteProducts=function FavouriteProducts(){var cartRef=useRef();var products=ProductStore.useState(function(s){return s.products;});var favourites=FavouritesStore.useState(function(s){return s.product_ids;});var shopCart=CartStore.useState(function(s){return s.product_ids;});var _useState=useState([]),_useState2=_slicedToArray(_useState,2),searchResults=_useState2[0],setSearchResults=_useState2[1];var _useState3=useState(6),_useState4=_slicedToArray(_useState3,2),amountLoaded=_useState4[0],setAmountLoaded=_useState4[1];useEffect(function(){var getFavourites=function getFavourites(){setSearchResults([]);favourites.forEach(function(favourite){var favouriteParts=favourite.split(\"/\");var categorySlug=favouriteParts[0];var productID=favouriteParts[1];var tempCategory=products.filter(function(p){return p.slug===categorySlug;})[0];var tempProduct=tempCategory.products.filter(function(p){return parseInt(p.id)===parseInt(productID);})[0];var tempFavourite={category:tempCategory,product:tempProduct};setSearchResults(function(prevSearchResults){return[].concat(_toConsumableArray(prevSearchResults),[tempFavourite]);});});};getFavourites();},[favourites]);var fetchMore=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0://\tIncrement the amount loaded by 6 for the next iteration\nsetAmountLoaded(function(prevAmount){return prevAmount+6;});e.target.complete();case 2:case\"end\":return _context.stop();}}},_callee);}));return function fetchMore(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(IonPage,{id:\"category-page\",className:styles.categoryPage,children:[/*#__PURE__*/_jsx(IonHeader,{children:/*#__PURE__*/_jsx(IonToolbar,{children:/*#__PURE__*/_jsx(IonTitle,{children:\"Favourites\"})})}),/*#__PURE__*/_jsxs(IonContent,{fullscreen:true,children:[/*#__PURE__*/_jsxs(IonGrid,{children:[/*#__PURE__*/_jsx(IonRow,{className:\"ion-text-center\",children:/*#__PURE__*/_jsx(IonCol,{size:\"12\",children:/*#__PURE__*/_jsxs(IonNote,{children:[searchResults&&searchResults.length,\" \",searchResults.length>1||searchResults.length===0?\" favourites\":\" favourite\",\" found\"]})})}),/*#__PURE__*/_jsx(IonRow,{children:searchResults&&searchResults.map(function(product,index){if(index<=amountLoaded){return/*#__PURE__*/_jsx(ProductCard,{product:product.product,index:index,cartRef:cartRef,category:product.category},\"category_product_\".concat(index));}})})]}),/*#__PURE__*/_jsx(IonInfiniteScroll,{threshold:\"100px\",onIonInfinite:fetchMore,children:/*#__PURE__*/_jsx(IonInfiniteScrollContent,{loadingSpinner:\"bubbles\",loadingText:\"Fetching more...\"})})]})]});};export default FavouriteProducts;","map":{"version":3,"sources":["D:/mobilecross/Ajege/src/pages/FavouriteProducts.js"],"names":["IonBadge","IonButton","IonButtons","IonCol","IonContent","IonGrid","IonHeader","IonIcon","IonInfiniteScroll","IonInfiniteScrollContent","IonNote","IonPage","IonRow","IonTitle","IonToolbar","cart","chevronBackOutline","useEffect","useRef","useState","ProductCard","CartStore","FavouritesStore","ProductStore","styles","FavouriteProducts","cartRef","products","s","favourites","product_ids","shopCart","searchResults","setSearchResults","amountLoaded","setAmountLoaded","getFavourites","forEach","favourite","favouriteParts","split","categorySlug","productID","tempCategory","filter","p","slug","tempProduct","parseInt","id","tempFavourite","category","product","prevSearchResults","fetchMore","e","prevAmount","target","complete","categoryPage","length","map","index"],"mappings":"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","sourcesContent":["import { IonBadge, IonButton, IonButtons, IonCol, IonContent, IonGrid, IonHeader, IonIcon, IonInfiniteScroll, IonInfiniteScrollContent, IonNote, IonPage, IonRow, IonTitle, IonToolbar } from \"@ionic/react\";\r\nimport { cart, chevronBackOutline } from \"ionicons/icons\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport ProductCard from \"../components/ProductCard\";\r\nimport { CartStore } from \"../data/CartStore\";\r\nimport { FavouritesStore } from \"../data/FavouritesStore\";\r\nimport { ProductStore } from \"../data/ProductStore\";\r\n\r\nimport styles from \"./CategoryProducts.module.css\";\r\n\r\nconst FavouriteProducts = () => {\r\n\r\n    const cartRef = useRef();\r\n    const products = ProductStore.useState(s => s.products);\r\n    const favourites = FavouritesStore.useState(s => s.product_ids);\r\n    const shopCart = CartStore.useState(s => s.product_ids);\r\n    const [ searchResults, setSearchResults ] = useState([]);\r\n    const [ amountLoaded, setAmountLoaded ] = useState(6);\r\n\r\n    useEffect(() => {\r\n\r\n        const getFavourites = () => {\r\n\r\n            setSearchResults([]);\r\n\r\n            favourites.forEach(favourite => {\r\n\r\n                var favouriteParts = favourite.split(\"/\");\r\n                var categorySlug = favouriteParts[0];\r\n                var productID = favouriteParts[1];\r\n                \r\n                const tempCategory = products.filter(p => p.slug === categorySlug)[0];\r\n                const tempProduct = tempCategory.products.filter(p => parseInt(p.id) === parseInt(productID))[0];\r\n\r\n                const tempFavourite = {\r\n\r\n                    category: tempCategory,\r\n                    product: tempProduct\r\n                };\r\n\r\n                setSearchResults(prevSearchResults => [ ...prevSearchResults, tempFavourite ]);\r\n            });\r\n        }\r\n\r\n        getFavourites();\r\n    }, [ favourites ]);\r\n\r\n    const fetchMore = async (e) => {\r\n\r\n\t\t//\tIncrement the amount loaded by 6 for the next iteration\r\n\t\tsetAmountLoaded(prevAmount => (prevAmount + 6));\r\n\t\te.target.complete();\r\n\t}\r\n\r\n    return (\r\n\r\n        <IonPage id=\"category-page\" className={ styles.categoryPage }>\r\n            <IonHeader>\r\n\t\t\t\t<IonToolbar>\r\n\t\t\t\t\t<IonTitle>Favourites</IonTitle>\r\n\t\t\t\t</IonToolbar>\r\n\t\t\t</IonHeader>\r\n\t\t\t\r\n\t\t\t<IonContent fullscreen>\r\n                <IonGrid>\r\n\r\n                    <IonRow className=\"ion-text-center\">\r\n                        <IonCol size=\"12\">\r\n                            <IonNote>{ searchResults && searchResults.length } { (searchResults.length > 1 || searchResults.length === 0) ? \" favourites\" : \" favourite\" } found</IonNote>\r\n                        </IonCol>\r\n                    </IonRow>\r\n\r\n                    <IonRow>\r\n                        { searchResults && searchResults.map((product, index) => {\r\n\r\n                            if ((index <= amountLoaded)) {\r\n                                return (\r\n                                    <ProductCard key={ `category_product_${ index }`} product={ product.product } index={ index } cartRef={ cartRef } category={ product.category } />\r\n                                );\r\n                            }\r\n                        })}\r\n                    </IonRow>\r\n                </IonGrid>\r\n\r\n                <IonInfiniteScroll threshold=\"100px\" onIonInfinite={ fetchMore }>\r\n\t\t\t\t\t<IonInfiniteScrollContent loadingSpinner=\"bubbles\" loadingText=\"Fetching more...\">\r\n\t\t\t\t\t</IonInfiniteScrollContent>\r\n\t\t\t\t</IonInfiniteScroll>\r\n            </IonContent>\r\n        </IonPage>\r\n    );\r\n}\r\n\r\nexport default FavouriteProducts;"]},"metadata":{},"sourceType":"module"}