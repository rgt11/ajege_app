{"ast":null,"code":"import _slicedToArray from\"D:/mobilecross/Ajege/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{IonButton,IonCard,IonCardContent,IonCardHeader,IonCol,IonIcon}from\"@ionic/react\";import{arrowRedoOutline,cart,cartOutline,heart,heartOutline}from\"ionicons/icons\";import{useEffect,useRef,useState}from\"react\";import{addToCart}from\"../data/CartStore\";import{addToFavourites,FavouritesStore}from\"../data/FavouritesStore\";import styles from\"./ProductCard.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProductCard=function ProductCard(props){var product=props.product,category=props.category,index=props.index,cartRef=props.cartRef;var favourites=FavouritesStore.useState(function(s){return s.product_ids;});var productCartRef=useRef();var productFavouriteRef=useRef();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isFavourite=_useState2[0],setIsFavourite=_useState2[1];useEffect(function(){var tempIsFavourite=favourites.find(function(f){return f===\"\".concat(category.slug,\"/\").concat(product.id);});setIsFavourite(tempIsFavourite?true:false);},[props.product,favourites]);var addProductToFavourites=function addProductToFavourites(e,categorySlug,productID){e.preventDefault();e.stopPropagation();addToFavourites(categorySlug,productID);productFavouriteRef.current.style.display=\"\";productFavouriteRef.current.classList.add(\"animate__fadeOutTopRight\");setTimeout(function(){if(productCartRef.current){productFavouriteRef.current.classList.remove(\"animate__fadeOutTopRight\");productFavouriteRef.current.style.display=\"none\";}},500);};var addProductToCart=function addProductToCart(e,categorySlug,productID){e.preventDefault();e.stopPropagation();productCartRef.current.style.display=\"\";productCartRef.current.classList.add(\"animate__fadeOutUp\");setTimeout(function(){cartRef.current.classList.add(\"animate__tada\");addToCart(categorySlug,productID);setTimeout(function(){cartRef.current.classList.remove(\"animate__tada\");productCartRef.current.style.display=\"none\";},500);},500);};return/*#__PURE__*/_jsx(IonCol,{size:\"6\",children:/*#__PURE__*/_jsxs(IonCard,{routerLink:\"/category/\".concat(category.slug,\"/\").concat(product.id),className:styles.categoryCard,children:[/*#__PURE__*/_jsxs(IonCardHeader,{className:styles.productCardHeader,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.productCardActions,children:[/*#__PURE__*/_jsx(IonIcon,{className:styles.productCardAction,color:isFavourite?\"danger\":\"medium\",icon:isFavourite?heart:heartOutline,onClick:function onClick(e){return addProductToFavourites(e,category.slug,product.id);}}),/*#__PURE__*/_jsx(IonIcon,{ref:productFavouriteRef,style:{position:\"absolute\",display:\"none\"},className:\"\".concat(styles.productCardAction,\" animate__animated\"),color:\"danger\",icon:heart})]}),/*#__PURE__*/_jsx(\"img\",{src:product.image,alt:\"product pic\"}),/*#__PURE__*/_jsx(\"p\",{className:\"ion-text-wrap\",children:product.name})]}),/*#__PURE__*/_jsx(IonCardContent,{className:styles.categoryCardContent,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.productPrice,children:[/*#__PURE__*/_jsx(IonButton,{style:{width:\"100%\"},color:\"light\",children:product.price}),/*#__PURE__*/_jsx(IonButton,{color:\"success\",onClick:function onClick(e){return addProductToCart(e,category.slug,product.id);},children:/*#__PURE__*/_jsx(IonIcon,{icon:cartOutline})}),/*#__PURE__*/_jsx(IonIcon,{ref:productCartRef,icon:cart,color:\"dark\",style:{position:\"absolute\",display:\"none\",fontSize:\"3rem\"},className:\"animate__animated\"})]})})]})},\"category_product_list_\".concat(index));};export default ProductCard;","map":{"version":3,"sources":["D:/mobilecross/Ajege/src/components/ProductCard.js"],"names":["IonButton","IonCard","IonCardContent","IonCardHeader","IonCol","IonIcon","arrowRedoOutline","cart","cartOutline","heart","heartOutline","useEffect","useRef","useState","addToCart","addToFavourites","FavouritesStore","styles","ProductCard","props","product","category","index","cartRef","favourites","s","product_ids","productCartRef","productFavouriteRef","isFavourite","setIsFavourite","tempIsFavourite","find","f","slug","id","addProductToFavourites","e","categorySlug","productID","preventDefault","stopPropagation","current","style","display","classList","add","setTimeout","remove","addProductToCart","categoryCard","productCardHeader","productCardActions","productCardAction","position","image","name","categoryCardContent","productPrice","width","price","fontSize"],"mappings":"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","sourcesContent":["import { IonButton, IonCard, IonCardContent, IonCardHeader, IonCol, IonIcon } from \"@ionic/react\";\r\nimport { arrowRedoOutline, cart, cartOutline, heart, heartOutline } from \"ionicons/icons\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { addToCart } from \"../data/CartStore\";\r\nimport { addToFavourites, FavouritesStore } from \"../data/FavouritesStore\";\r\nimport styles from \"./ProductCard.module.css\";\r\n\r\nconst ProductCard = props => {\r\n\r\n    const { product, category, index, cartRef } = props;\r\n    const favourites = FavouritesStore.useState(s => s.product_ids);\r\n\r\n    const productCartRef = useRef();\r\n    const productFavouriteRef = useRef();\r\n    const [ isFavourite, setIsFavourite ] = useState(false);\r\n\r\n    useEffect(() => {\r\n\r\n        const tempIsFavourite = favourites.find(f => f === `${ category.slug }/${ product.id }`);\r\n        setIsFavourite(tempIsFavourite ? true : false);\r\n    }, [props.product, favourites]);\r\n\r\n    const addProductToFavourites = (e, categorySlug, productID) => {\r\n\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        addToFavourites(categorySlug, productID);\r\n\r\n\r\n        productFavouriteRef.current.style.display = \"\";\r\n        productFavouriteRef.current.classList.add(\"animate__fadeOutTopRight\");\r\n\r\n        setTimeout(() => {\r\n            if (productCartRef.current) {\r\n                productFavouriteRef.current.classList.remove(\"animate__fadeOutTopRight\");\r\n                productFavouriteRef.current.style.display = \"none\";\r\n            }\r\n        }, 500);\r\n    }\r\n\r\n    const addProductToCart = (e, categorySlug, productID) => {\r\n\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n\r\n        productCartRef.current.style.display = \"\";\r\n        productCartRef.current.classList.add(\"animate__fadeOutUp\");\r\n\r\n        setTimeout(() => {\r\n\r\n            cartRef.current.classList.add(\"animate__tada\");\r\n            addToCart(categorySlug, productID);\r\n\r\n            setTimeout(() => {\r\n                \r\n                cartRef.current.classList.remove(\"animate__tada\");\r\n                productCartRef.current.style.display = \"none\";\r\n            }, 500);\r\n        }, 500);\r\n    }\r\n\r\n    return (\r\n\r\n        <IonCol size=\"6\" key={ `category_product_list_${ index }`}>\r\n            <IonCard routerLink={ `/category/${ category.slug }/${ product.id }`} className={ styles.categoryCard }>\r\n                <IonCardHeader className={ styles.productCardHeader }>\r\n                    <div className={ styles.productCardActions }>\r\n                        <IonIcon className={ styles.productCardAction }  color={ isFavourite ? \"danger\" : \"medium\" } icon={ isFavourite ? heart : heartOutline } onClick={ e => addProductToFavourites(e, category.slug, product.id) } />\r\n                        <IonIcon ref={ productFavouriteRef } style={{ position: \"absolute\", display: \"none\" }} className={ `${ styles.productCardAction } animate__animated` } color=\"danger\" icon={ heart } />\r\n                      \r\n                    </div>\r\n                    <img src={ product.image } alt=\"product pic\" />\r\n                    <p className=\"ion-text-wrap\">{ product.name }</p>\r\n                </IonCardHeader>\r\n\r\n                <IonCardContent className={ styles.categoryCardContent }>\r\n                    \r\n                    <div className={ styles.productPrice }>\r\n                        <IonButton style={{ width: \"100%\" }} color=\"light\">\r\n                            { product.price }\r\n                        </IonButton>\r\n                        <IonButton color=\"success\" onClick={ e => addProductToCart(e, category.slug, product.id) }>\r\n                            <IonIcon icon={ cartOutline } />\r\n                        </IonButton>\r\n\r\n                        <IonIcon ref={ productCartRef } icon={ cart } color=\"dark\" style={{ position: \"absolute\", display: \"none\", fontSize: \"3rem\" }} className=\"animate__animated\" />\r\n                    </div>\r\n                </IonCardContent>\r\n            </IonCard>\r\n        </IonCol>\r\n    );\r\n}\r\n\r\nexport default ProductCard;"]},"metadata":{},"sourceType":"module"}